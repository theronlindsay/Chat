(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();const Hn=!1;var Rt=Array.isArray,Ls=Array.prototype.indexOf,Qt=Array.from,wt=Object.defineProperty,Pe=Object.getOwnPropertyDescriptor,zn=Object.getOwnPropertyDescriptors,Ps=Object.prototype,Us=Array.prototype,Zt=Object.getPrototypeOf,En=Object.isExtensible;const Xe=()=>{};function Ds(e){return e()}function Gt(e){for(var t=0;t<e.length;t++)e[t]()}function Fs(){var e,t,n=new Promise((s,a)=>{e=s,t=a});return{promise:n,resolve:e,reject:t}}const ae=2,en=4,$t=8,ht=16,we=32,et=64,Gn=128,ne=256,Et=512,q=1024,se=2048,Me=4096,ce=8192,Ge=16384,tn=32768,nn=65536,Sn=1<<17,Ws=1<<18,sn=1<<19,rn=1<<20,Bt=1<<21,an=1<<22,Ue=1<<23,De=Symbol("$state"),Hs=Symbol("legacy props"),zs=Symbol(""),ln=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Gs(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function on(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Bs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function qs(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ys(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function js(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Vs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ks(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Xs(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Js(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Qs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const Mt=1,It=2,Bn=4,Zs=8,er=16,tr=2,nr=4,sr=8,rr=1,ar=2,X=Symbol(),lr="http://www.w3.org/1999/xhtml";let ir=!1;function qn(e){return e===this.v}function Yn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function jn(e){return!Yn(e,this.v)}let tt=!1,or=!1;function cr(){tt=!0}let F=null;function St(e){F=e}function Ee(e,t=!1,n){F={p:F,c:null,e:null,s:e,x:null,l:tt&&!t?{s:null,u:null,$:[]}:null}}function Se(e){var t=F,n=t.e;if(n!==null){t.e=null;for(var s of n)as(s)}return e!==void 0&&(t.x=e),F=t.p,e??{}}function nt(){return!tt||F!==null&&F.l===null}const ur=new WeakMap;function fr(e){var t=M;if(t===null)return I.f|=Ue,e;if((t.f&tn)===0){if((t.f&Gn)===0)throw!t.parent&&e instanceof Error&&Vn(e),e;t.b.error(e)}else cn(e,t)}function cn(e,t){for(;t!==null;){if((t.f&Gn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&Vn(e),e}function Vn(e){const t=ur.get(e);t&&(wt(e,"message",{value:t.message}),wt(e,"stack",{value:t.stack}))}let xt=[];function vr(){var e=xt;xt=[],Gt(e)}function un(e){xt.length===0&&queueMicrotask(vr),xt.push(e)}function dr(){for(var e=M.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&Gs(),e}function fn(e){var t=ae|se,n=I!==null&&(I.f&ae)!==0?I:null;return M===null||n!==null&&(n.f&ne)!==0?t|=ne:M.f|=sn,{ctx:F,deps:null,effects:null,equals:qn,f:t,fn:e,reactions:null,rv:0,v:X,wv:0,parent:n??M,ac:null}}function pr(e,t){let n=M;n===null&&Bs();var s=n.b,a=void 0,r=ct(X),l=null,o=!I;return Tr(()=>{try{var i=e()}catch(f){i=Promise.reject(f)}var c=()=>i;a=l?.then(c,c)??Promise.resolve(i),l=a;var u=j,d=s.pending;o&&(s.update_pending_count(1),d||u.increment());const v=(f,h=void 0)=>{l=null,d||u.activate(),h?h!==ln&&(r.f|=Ue,ut(r,h)):((r.f&Ue)!==0&&(r.f^=Ue),ut(r,f)),o&&(s.update_pending_count(-1),d||u.decrement()),Jn()};if(a.then(v,f=>v(null,f||"unknown")),u)return()=>{queueMicrotask(()=>u.neuter())}}),new Promise(i=>{function c(u){function d(){u===a?i(r):c(a)}u.then(d,d)}c(a)})}function vn(e){const t=fn(e);return t.equals=jn,t}function Kn(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)be(t[n])}}function hr(e){for(var t=e.parent;t!==null;){if((t.f&ae)===0)return t;t=t.parent}return null}function dn(e){var t,n=M;$e(hr(e));try{Kn(e),t=hs(e)}finally{$e(n)}return t}function Xn(e){var t=dn(e);if(e.equals(t)||(e.v=t,e.wv=ds()),!Be)if(Ze!==null)Ze.set(e,e.v);else{var n=(ke||(e.f&ne)!==0)&&e.deps!==null?Me:q;V(e,n)}}function _r(e,t,n){const s=nt()?fn:vn;if(t.length===0){n(e.map(s));return}var a=j,r=M,l=mr(),o=dr();Promise.all(t.map(i=>pr(i))).then(i=>{a?.activate(),l();try{n([...e.map(s),...i])}catch(c){(r.f&Ge)===0&&cn(c,r)}a?.deactivate(),Jn()}).catch(i=>{o.error(i)})}function mr(){var e=M,t=I,n=F;return function(){$e(e),he(t),St(n)}}function Jn(){$e(null),he(null),St(null)}const yt=new Set;let j=null,Ze=null,xn=new Set,rt=[],pn=null,qt=!1;class Nt{#o=new Map;#a=new Map;#l=new Set;#t=0;#c=null;#u=!1;#s=[];#i=[];#n=[];#e=[];#r=[];skipped_effects=new Set;#v(t){rt=[];var n=null;if(yt.size>1){n=new Map,Ze=new Map;for(const[r,l]of this.#o)n.set(r,{v:r.v,wv:r.wv}),r.v=l;for(const r of yt)if(r!==this)for(const[l,o]of r.#a)n.has(l)||(n.set(l,{v:l.v,wv:l.wv}),l.v=o)}for(const r of t)this.#d(r);if(this.#s.length===0&&this.#t===0){var s=this.#n,a=this.#e;this.#n=[],this.#e=[],this.#r=[],this.#f(),Tn(s),Tn(a),this.#c?.resolve()}else{for(const r of this.#n)V(r,q);for(const r of this.#e)V(r,q);for(const r of this.#r)V(r,q)}if(n){for(const[r,{v:l,wv:o}]of n)r.wv<=o&&(r.v=l);Ze=null}for(const r of this.#s)Qe(r);for(const r of this.#i)Qe(r);this.#s=[],this.#i=[]}#d(t){t.f^=q;for(var n=t.first;n!==null;){var s=n.f,a=(s&(we|et))!==0,r=a&&(s&q)!==0,l=r||(s&ce)!==0||this.skipped_effects.has(n);if(!l&&n.fn!==null){if(a)n.f^=q;else if((s&en)!==0)this.#e.push(n);else if(_t(n))if((s&an)!==0){var o=n.b?.pending?this.#i:this.#s;o.push(n)}else(n.f&ht)!==0&&this.#r.push(n),Qe(n);var i=n.first;if(i!==null){n=i;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}}capture(t,n){this.#a.has(t)||this.#a.set(t,n),this.#o.set(t,t.v)}activate(){j=this}deactivate(){j=null;for(const t of xn)if(xn.delete(t),t(),j!==null)break}neuter(){this.#u=!0}flush(){rt.length>0?this.flush_effects():this.#f(),j===this&&(this.#t===0&&yt.delete(this),this.deactivate())}flush_effects(){var t=Je;qt=!0;try{var n=0;for(An(!0);rt.length>0;){if(n++>1e3){var s,a;gr()}this.#v(rt),Fe.clear()}}finally{qt=!1,An(t),pn=null}}#f(){if(!this.#u)for(const t of this.#l)t();this.#l.clear()}increment(){this.#t+=1}decrement(){if(this.#t-=1,this.#t===0){for(const t of this.#n)V(t,se),Oe(t);for(const t of this.#e)V(t,se),Oe(t);for(const t of this.#r)V(t,se),Oe(t);this.#n=[],this.#e=[],this.flush()}else this.deactivate()}add_callback(t){this.#l.add(t)}settled(){return(this.#c??=Fs()).promise}static ensure(t=!0){if(j===null){const n=j=new Nt;yt.add(j),t&&queueMicrotask(()=>{j===n&&n.flush()})}return j}}function gr(){try{Vs()}catch(e){cn(e,pn)}}function Tn(e){var t=e.length;if(t!==0){for(var n=0;n<t;n++){var s=e[n];if((s.f&(Ge|ce))===0&&_t(s)){var a=Ct;if(Qe(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?us(s):s.fn=null),Ct>a&&(s.f&rn)!==0)break}}for(;n<t;n+=1)Oe(e[n])}}function Oe(e){for(var t=pn=e;t.parent!==null;){t=t.parent;var n=t.f;if(qt&&t===M&&(n&ht)!==0)return;if((n&(et|we))!==0){if((n&q)===0)return;t.f^=q}}rt.push(t)}const Fe=new Map;function ct(e,t){var n={f:0,v:e,reactions:null,equals:qn,rv:0,wv:0};return n}function Ce(e,t){const n=ct(e);return Ar(n),n}function Z(e,t=!1,n=!0){const s=ct(e);return t||(s.equals=jn),tt&&n&&F!==null&&F.l!==null&&(F.l.s??=[]).push(s),s}function Tt(e,t){return $(e,ue(()=>_(e))),t}function $(e,t,n=!1){I!==null&&(!de||(I.f&Sn)!==0)&&nt()&&(I.f&(ae|ht|an|Sn))!==0&&!ye?.includes(e)&&Qs();let s=n?Ke(t):t;return ut(e,s)}function ut(e,t){if(!e.equals(t)){var n=e.v;Be?Fe.set(e,t):Fe.set(e,n),e.v=t,Nt.ensure().capture(e,n),(e.f&ae)!==0&&((e.f&se)!==0&&dn(e),V(e,(e.f&ne)===0?q:Me)),e.wv=ds(),Qn(e,se),nt()&&M!==null&&(M.f&q)!==0&&(M.f&(we|et))===0&&(le===null?kr([e]):le.push(e))}return t}function Dt(e){$(e,e.v+1)}function Qn(e,t){var n=e.reactions;if(n!==null)for(var s=nt(),a=n.length,r=0;r<a;r++){var l=n[r],o=l.f;(o&se)===0&&(!s&&l===M||(V(l,t),(o&(q|ne))!==0&&((o&ae)!==0?Qn(l,Me):Oe(l))))}}function Ke(e){if(typeof e!="object"||e===null||De in e)return e;const t=Zt(e);if(t!==Ps&&t!==Us)return e;var n=new Map,s=Rt(e),a=Ce(0),r=He,l=o=>{if(He===r)return o();var i=I,c=He;he(null),On(r);var u=o();return he(i),On(c),u};return s&&n.set("length",Ce(e.length)),new Proxy(e,{defineProperty(o,i,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Xs();var u=n.get(i);return u===void 0?u=l(()=>{var d=Ce(c.value);return n.set(i,d),d}):$(u,c.value,!0),!0},deleteProperty(o,i){var c=n.get(i);if(c===void 0){if(i in o){const u=l(()=>Ce(X));n.set(i,u),Dt(a)}}else $(c,X),Dt(a);return!0},get(o,i,c){if(i===De)return e;var u=n.get(i),d=i in o;if(u===void 0&&(!d||Pe(o,i)?.writable)&&(u=l(()=>{var f=Ke(d?o[i]:X),h=Ce(f);return h}),n.set(i,u)),u!==void 0){var v=_(u);return v===X?void 0:v}return Reflect.get(o,i,c)},getOwnPropertyDescriptor(o,i){var c=Reflect.getOwnPropertyDescriptor(o,i);if(c&&"value"in c){var u=n.get(i);u&&(c.value=_(u))}else if(c===void 0){var d=n.get(i),v=d?.v;if(d!==void 0&&v!==X)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return c},has(o,i){if(i===De)return!0;var c=n.get(i),u=c!==void 0&&c.v!==X||Reflect.has(o,i);if(c!==void 0||M!==null&&(!u||Pe(o,i)?.writable)){c===void 0&&(c=l(()=>{var v=u?Ke(o[i]):X,f=Ce(v);return f}),n.set(i,c));var d=_(c);if(d===X)return!1}return u},set(o,i,c,u){var d=n.get(i),v=i in o;if(s&&i==="length")for(var f=c;f<d.v;f+=1){var h=n.get(f+"");h!==void 0?$(h,X):f in o&&(h=l(()=>Ce(X)),n.set(f+"",h))}if(d===void 0)(!v||Pe(o,i)?.writable)&&(d=l(()=>Ce(void 0)),$(d,Ke(c)),n.set(i,d));else{v=d.v!==X;var b=l(()=>Ke(c));$(d,b)}var p=Reflect.getOwnPropertyDescriptor(o,i);if(p?.set&&p.set.call(u,c),!v){if(s&&typeof i=="string"){var S=n.get("length"),w=Number(i);Number.isInteger(w)&&w>=S.v&&$(S,w+1)}Dt(a)}return!0},ownKeys(o){_(a);var i=Reflect.ownKeys(o).filter(d=>{var v=n.get(d);return v===void 0||v.v!==X});for(var[c,u]of n)u.v!==X&&!(c in o)&&i.push(c);return i},setPrototypeOf(){Js()}})}var Cn,Zn,es,ts,ns;function yr(){if(Cn===void 0){Cn=window,Zn=document,es=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;ts=Pe(t,"firstChild").get,ns=Pe(t,"nextSibling").get,En(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),En(n)&&(n.__t=void 0)}}function st(e=""){return document.createTextNode(e)}function Ae(e){return ts.call(e)}function Lt(e){return ns.call(e)}function E(e,t){return Ae(e)}function We(e,t){{var n=Ae(e);return n instanceof Comment&&n.data===""?Lt(n):n}}function A(e,t=1,n=!1){let s=e;for(;t--;)s=Lt(s);return s}function br(e){e.textContent=""}function ss(){return!1}function rs(e){M===null&&I===null&&js(),I!==null&&(I.f&ne)!==0&&M===null&&Ys(),Be&&qs()}function wr(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function _e(e,t,n,s=!0){var a=M;a!==null&&(a.f&ce)!==0&&(e|=ce);var r={ctx:F,deps:null,nodes_start:null,nodes_end:null,f:e|se,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Qe(r),r.f|=tn}catch(i){throw be(r),i}else t!==null&&Oe(r);var l=n&&r.deps===null&&r.first===null&&r.nodes_start===null&&r.teardown===null&&(r.f&sn)===0;if(!l&&s&&(a!==null&&wr(r,a),I!==null&&(I.f&ae)!==0)){var o=I;(o.effects??=[]).push(r)}return r}function hn(e){const t=_e($t,null,!1);return V(t,q),t.teardown=e,t}function Yt(e){rs();var t=M.f,n=!I&&(t&we)!==0&&(t&tn)===0;if(n){var s=F;(s.e??=[]).push(e)}else return as(e)}function as(e){return _e(en|rn,e,!1)}function Er(e){return rs(),_e($t|rn,e,!0)}function Sr(e){Nt.ensure();const t=_e(et,e,!0);return(n={})=>new Promise(s=>{n.outro?gn(t,()=>{be(t),s(void 0)}):(be(t),s(void 0))})}function xr(e){return _e(en,e,!1)}function _n(e,t){var n=F,s={effect:null,ran:!1,deps:e};n.l.$.push(s),s.effect=Pt(()=>{e(),!s.ran&&(s.ran=!0,ue(t))})}function mn(){var e=F;Pt(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&q)!==0&&V(n,Me),_t(n)&&Qe(n),t.ran=!1}})}function Tr(e){return _e(an|sn,e,!0)}function Pt(e,t=0){return _e($t|t,e,!0)}function re(e,t=[],n=[]){_r(t,n,s=>{_e($t,()=>e(...s.map(_)),!0)})}function ls(e,t=0){var n=_e(ht|t,e,!0);return n}function ft(e,t=!0){return _e(we,e,!0,t)}function is(e){var t=e.teardown;if(t!==null){const n=Be,s=I;kn(!0),he(null);try{t.call(null)}finally{kn(n),he(s)}}}function os(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){n.ac?.abort(ln);var s=n.next;(n.f&et)!==0?n.parent=null:be(n,t),n=s}}function Cr(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&we)===0&&be(t),t=n}}function be(e,t=!0){var n=!1;(t||(e.f&Ws)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(cs(e.nodes_start,e.nodes_end),n=!0),os(e,t&&!n),At(e,0),V(e,Ge);var s=e.transitions;if(s!==null)for(const r of s)r.stop();is(e);var a=e.parent;a!==null&&a.first!==null&&us(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function cs(e,t){for(;e!==null;){var n=e===t?null:Lt(e);e.remove(),e=n}}function us(e){var t=e.parent,n=e.prev,s=e.next;n!==null&&(n.next=s),s!==null&&(s.prev=n),t!==null&&(t.first===e&&(t.first=s),t.last===e&&(t.last=n))}function gn(e,t){var n=[];yn(e,n,!0),fs(n,()=>{be(e),t&&t()})}function fs(e,t){var n=e.length;if(n>0){var s=()=>--n||t();for(var a of e)a.out(s)}else t()}function yn(e,t,n){if((e.f&ce)===0){if(e.f^=ce,e.transitions!==null)for(const l of e.transitions)(l.is_global||n)&&t.push(l);for(var s=e.first;s!==null;){var a=s.next,r=(s.f&nn)!==0||(s.f&we)!==0;yn(s,t,r?n:!1),s=a}}}function bn(e){vs(e,!0)}function vs(e,t){if((e.f&ce)!==0){e.f^=ce,(e.f&q)===0&&(V(e,se),Oe(e));for(var n=e.first;n!==null;){var s=n.next,a=(n.f&nn)!==0||(n.f&we)!==0;vs(n,a?t:!1),n=s}if(e.transitions!==null)for(const r of e.transitions)(r.is_global||t)&&r.in()}}let Je=!1;function An(e){Je=e}let Be=!1;function kn(e){Be=e}let I=null,de=!1;function he(e){I=e}let M=null;function $e(e){M=e}let ye=null;function Ar(e){I!==null&&(ye===null?ye=[e]:ye.push(e))}let Q=null,te=0,le=null;function kr(e){le=e}let Ct=1,vt=0,He=vt;function On(e){He=e}let ke=!1;function ds(){return++Ct}function _t(e){var t=e.f;if((t&se)!==0)return!0;if((t&Me)!==0){var n=e.deps,s=(t&ne)!==0;if(n!==null){var a,r,l=(t&Et)!==0,o=s&&M!==null&&!ke,i=n.length;if((l||o)&&(M===null||(M.f&Ge)===0)){var c=e,u=c.parent;for(a=0;a<i;a++)r=n[a],(l||!r?.reactions?.includes(c))&&(r.reactions??=[]).push(c);l&&(c.f^=Et),o&&u!==null&&(u.f&ne)===0&&(c.f^=ne)}for(a=0;a<i;a++)if(r=n[a],_t(r)&&Xn(r),r.wv>e.wv)return!0}(!s||M!==null&&!ke)&&V(e,q)}return!1}function ps(e,t,n=!0){var s=e.reactions;if(s!==null&&!ye?.includes(e))for(var a=0;a<s.length;a++){var r=s[a];(r.f&ae)!==0?ps(r,t,!1):t===r&&(n?V(r,se):(r.f&q)!==0&&V(r,Me),Oe(r))}}function hs(e){var t=Q,n=te,s=le,a=I,r=ke,l=ye,o=F,i=de,c=He,u=e.f;Q=null,te=0,le=null,ke=(u&ne)!==0&&(de||!Je||I===null),I=(u&(we|et))===0?e:null,ye=null,St(e.ctx),de=!1,He=++vt,e.ac!==null&&(e.ac.abort(ln),e.ac=null);try{e.f|=Bt;var d=(0,e.fn)(),v=e.deps;if(Q!==null){var f;if(At(e,te),v!==null&&te>0)for(v.length=te+Q.length,f=0;f<Q.length;f++)v[te+f]=Q[f];else e.deps=v=Q;if(!ke||(u&ae)!==0&&e.reactions!==null)for(f=te;f<v.length;f++)(v[f].reactions??=[]).push(e)}else v!==null&&te<v.length&&(At(e,te),v.length=te);if(nt()&&le!==null&&!de&&v!==null&&(e.f&(ae|Me|se))===0)for(f=0;f<le.length;f++)ps(le[f],e);return a!==null&&a!==e&&(vt++,le!==null&&(s===null?s=le:s.push(...le))),(e.f&Ue)!==0&&(e.f^=Ue),d}catch(h){return fr(h)}finally{e.f^=Bt,Q=t,te=n,le=s,I=a,ke=r,ye=l,St(o),de=i,He=c}}function Or(e,t){let n=t.reactions;if(n!==null){var s=Ls.call(n,e);if(s!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[s]=n[a],n.pop())}}n===null&&(t.f&ae)!==0&&(Q===null||!Q.includes(t))&&(V(t,Me),(t.f&(ne|Et))===0&&(t.f^=Et),Kn(t),At(t,0))}function At(e,t){var n=e.deps;if(n!==null)for(var s=t;s<n.length;s++)Or(e,n[s])}function Qe(e){var t=e.f;if((t&Ge)===0){V(e,q);var n=M,s=Je;M=e,Je=!0;try{(t&ht)!==0?Cr(e):os(e),is(e);var a=hs(e);e.teardown=typeof a=="function"?a:null,e.wv=Ct;var r;Hn&&or&&(e.f&se)!==0&&e.deps}finally{Je=s,M=n}}}function _(e){var t=e.f,n=(t&ae)!==0;if(I!==null&&!de){var s=M!==null&&(M.f&Ge)!==0;if(!s&&!ye?.includes(e)){var a=I.deps;if((I.f&Bt)!==0)e.rv<vt&&(e.rv=vt,Q===null&&a!==null&&a[te]===e?te++:Q===null?Q=[e]:(!ke||!Q.includes(e))&&Q.push(e));else{(I.deps??=[]).push(e);var r=e.reactions;r===null?e.reactions=[I]:r.includes(I)||r.push(I)}}}else if(n&&e.deps===null&&e.effects===null){var l=e,o=l.parent;o!==null&&(o.f&ne)===0&&(l.f^=ne)}if(Be){if(Fe.has(e))return Fe.get(e);if(n){l=e;var i=l.v;return((l.f&q)!==0||_s(l))&&(i=dn(l)),Fe.set(l,i),i}}else if(n){if(l=e,Ze?.has(l))return Ze.get(l);_t(l)&&Xn(l)}if((e.f&Ue)!==0)throw e.v;return e.v}function _s(e){if(e.v===X)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Fe.has(t)||(t.f&ae)!==0&&_s(t))return!0;return!1}function ue(e){var t=de;try{return de=!0,e()}finally{de=t}}const Rr=-7169;function V(e,t){e.f=e.f&Rr|t}function at(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(De in e)jt(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&De in n&&jt(n)}}}function jt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{jt(e[s],t)}catch{}const n=Zt(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const s=zn(n);for(let a in s){const r=s[a].get;if(r)try{r.call(e)}catch{}}}}}const $r=["touchstart","touchmove"];function Mr(e){return $r.includes(e)}let Rn=!1;function Ir(){Rn||(Rn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function ms(e){var t=I,n=M;he(null),$e(null);try{return e()}finally{he(t),$e(n)}}function Nr(e,t,n,s=n){e.addEventListener(t,()=>ms(n));const a=e.__on_r;a?e.__on_r=()=>{a(),s(!0)}:e.__on_r=()=>s(!0),Ir()}const Lr=new Set,$n=new Set;function Pr(e,t,n,s={}){function a(r){if(s.capture||lt.call(t,r),!r.cancelBubble)return ms(()=>n?.call(this,r))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?un(()=>{t.addEventListener(e,a,s)}):t.addEventListener(e,a,s),a}function Y(e,t,n,s,a){var r={capture:s,passive:a},l=Pr(e,t,n,r);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&hn(()=>{t.removeEventListener(e,l,r)})}function lt(e){var t=this,n=t.ownerDocument,s=e.type,a=e.composedPath?.()||[],r=a[0]||e.target,l=0,o=e.__root;if(o){var i=a.indexOf(o);if(i!==-1&&(t===document||t===window)){e.__root=t;return}var c=a.indexOf(t);if(c===-1)return;i<=c&&(l=i)}if(r=a[l]||e.target,r!==t){wt(e,"currentTarget",{configurable:!0,get(){return r||n}});var u=I,d=M;he(null),$e(null);try{for(var v,f=[];r!==null;){var h=r.assignedSlot||r.parentNode||r.host||null;try{var b=r["__"+s];if(b!=null&&(!r.disabled||e.target===r))if(Rt(b)){var[p,...S]=b;p.apply(r,[e,...S])}else b.call(r,e)}catch(w){v?f.push(w):v=w}if(e.cancelBubble||h===t||h===null)break;r=h}if(v){for(let w of f)queueMicrotask(()=>{throw w});throw v}}finally{e.__root=t,delete e.currentTarget,he(u),$e(d)}}}function gs(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function dt(e,t){var n=M;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function P(e,t){var n=(t&rr)!==0,s=(t&ar)!==0,a,r=!e.startsWith("<!>");return()=>{a===void 0&&(a=gs(r?e:"<!>"+e),n||(a=Ae(a)));var l=s||es?document.importNode(a,!0):a.cloneNode(!0);if(n){var o=Ae(l),i=l.lastChild;dt(o,i)}else dt(l,l);return l}}function ie(e=""){{var t=st(e+"");return dt(t,t),t}}function pt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=st();return e.append(t,n),dt(t,n),e}function x(e,t){e!==null&&e.before(t)}function Re(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Ur(e,t){return Dr(e,t)}const je=new Map;function Dr(e,{target:t,anchor:n,props:s={},events:a,context:r,intro:l=!0}){yr();var o=new Set,i=d=>{for(var v=0;v<d.length;v++){var f=d[v];if(!o.has(f)){o.add(f);var h=Mr(f);t.addEventListener(f,lt,{passive:h});var b=je.get(f);b===void 0?(document.addEventListener(f,lt,{passive:h}),je.set(f,1)):je.set(f,b+1)}}};i(Qt(Lr)),$n.add(i);var c=void 0,u=Sr(()=>{var d=n??t.appendChild(st());return ft(()=>{if(r){Ee({});var v=F;v.c=r}a&&(s.$$events=a),c=e(d,s)||{},r&&Se()}),()=>{for(var v of o){t.removeEventListener(v,lt);var f=je.get(v);--f===0?(document.removeEventListener(v,lt),je.delete(v)):je.set(v,f)}$n.delete(i),d!==n&&d.parentNode?.removeChild(d)}});return Fr.set(c,u),c}let Fr=new WeakMap;function z(e,t,n=!1){var s=e,a=null,r=null,l=X,o=n?nn:0,i=!1;const c=(f,h=!0)=>{i=!0,v(h,f)};var u=null;function d(){u!==null&&(u.lastChild.remove(),s.before(u),u=null);var f=l?a:r,h=l?r:a;f&&bn(f),h&&gn(h,()=>{l?r=null:a=null})}const v=(f,h)=>{if(l!==(l=f)){var b=ss(),p=s;if(b&&(u=document.createDocumentFragment(),u.append(p=st())),l?a??=h&&ft(()=>h(p)):r??=h&&ft(()=>h(p)),b){var S=j,w=l?a:r,k=l?r:a;w&&S.skipped_effects.delete(w),k&&S.skipped_effects.add(k),S.add_callback(d)}else d()}};ls(()=>{i=!1,t(c),i||v(null,null)},o)}function ys(e,t){return t}function Wr(e,t,n){for(var s=e.items,a=[],r=t.length,l=0;l<r;l++)yn(t[l].e,a,!0);var o=r>0&&a.length===0&&n!==null;if(o){var i=n.parentNode;br(i),i.append(n),s.clear(),ve(e,t[0].prev,t[r-1].next)}fs(a,()=>{for(var c=0;c<r;c++){var u=t[c];o||(s.delete(u.k),ve(e,u.prev,u.next)),be(u.e,!o)}})}function Vt(e,t,n,s,a,r=null){var l=e,o={flags:t,items:new Map,first:null},i=(t&Bn)!==0;if(i){var c=e;l=c.appendChild(st())}var u=null,d=!1,v=new Map,f=vn(()=>{var S=n();return Rt(S)?S:S==null?[]:Qt(S)}),h,b;function p(){Hr(b,h,o,v,l,a,t,s,n),r!==null&&(h.length===0?u?bn(u):u=ft(()=>r(l)):u!==null&&gn(u,()=>{u=null}))}ls(()=>{b??=M,h=_(f);var S=h.length;if(!(d&&S===0)){d=S===0;var w,k,U,N;if(ss()){var T=new Set,O=j;for(k=0;k<S;k+=1){U=h[k],N=s(U,k);var W=o.items.get(N)??v.get(N);W?(t&(Mt|It))!==0&&bs(W,U,k,t):(w=ws(null,o,null,null,U,N,k,a,t,n,!0),v.set(N,w)),T.add(N)}for(const[B,J]of o.items)T.has(B)||O.skipped_effects.add(J.e);O.add_callback(p)}else p();_(f)}})}function Hr(e,t,n,s,a,r,l,o,i){var c=(l&Zs)!==0,u=(l&(Mt|It))!==0,d=t.length,v=n.items,f=n.first,h=f,b,p=null,S,w=[],k=[],U,N,T,O;if(c)for(O=0;O<d;O+=1)U=t[O],N=o(U,O),T=v.get(N),T!==void 0&&(T.a?.measure(),(S??=new Set).add(T));for(O=0;O<d;O+=1){if(U=t[O],N=o(U,O),T=v.get(N),T===void 0){var W=s.get(N);if(W!==void 0){s.delete(N),v.set(N,W);var B=p?p.next:h;ve(n,p,W),ve(n,W,B),Ft(W,B,a),p=W}else{var J=h?h.e.nodes_start:a;p=ws(J,n,p,p===null?n.first:p.next,U,N,O,r,l,i)}v.set(N,p),w=[],k=[],h=p.next;continue}if(u&&bs(T,U,O,l),(T.e.f&ce)!==0&&(bn(T.e),c&&(T.a?.unfix(),(S??=new Set).delete(T))),T!==h){if(b!==void 0&&b.has(T)){if(w.length<k.length){var L=k[0],m;p=L.prev;var g=w[0],y=w[w.length-1];for(m=0;m<w.length;m+=1)Ft(w[m],L,a);for(m=0;m<k.length;m+=1)b.delete(k[m]);ve(n,g.prev,y.next),ve(n,p,g),ve(n,y,L),h=L,p=y,O-=1,w=[],k=[]}else b.delete(T),Ft(T,h,a),ve(n,T.prev,T.next),ve(n,T,p===null?n.first:p.next),ve(n,p,T),p=T;continue}for(w=[],k=[];h!==null&&h.k!==N;)(h.e.f&ce)===0&&(b??=new Set).add(h),k.push(h),h=h.next;if(h===null)continue;T=h}w.push(T),p=T,h=T.next}if(h!==null||b!==void 0){for(var C=b===void 0?[]:Qt(b);h!==null;)(h.e.f&ce)===0&&C.push(h),h=h.next;var G=C.length;if(G>0){var H=(l&Bn)!==0&&d===0?a:null;if(c){for(O=0;O<G;O+=1)C[O].a?.measure();for(O=0;O<G;O+=1)C[O].a?.fix()}Wr(n,C,H)}}c&&un(()=>{if(S!==void 0)for(T of S)T.a?.apply()}),e.first=n.first&&n.first.e,e.last=p&&p.e;for(var R of s.values())be(R.e);s.clear()}function bs(e,t,n,s){(s&Mt)!==0&&ut(e.v,t),(s&It)!==0?ut(e.i,n):e.i=n}function ws(e,t,n,s,a,r,l,o,i,c,u){var d=(i&Mt)!==0,v=(i&er)===0,f=d?v?Z(a,!1,!1):ct(a):a,h=(i&It)===0?l:ct(l),b={i:h,v:f,k:r,a:null,e:null,prev:n,next:s};try{if(e===null){var p=document.createDocumentFragment();p.append(e=st())}return b.e=ft(()=>o(e,f,h,c),ir),b.e.prev=n&&n.e,b.e.next=s&&s.e,n===null?u||(t.first=b):(n.next=b,n.e.next=b.e),s!==null&&(s.prev=b,s.e.prev=b.e),b}finally{}}function Ft(e,t,n){for(var s=e.next?e.next.e.nodes_start:n,a=t?t.e.nodes_start:n,r=e.e.nodes_start;r!==null&&r!==s;){var l=Lt(r);a.before(r),r=l}}function ve(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function zr(e,t,n=!1,s=!1,a=!1){var r=e,l="";re(()=>{var o=M;if(l!==(l=t()??"")&&(o.nodes_start!==null&&(cs(o.nodes_start,o.nodes_end),o.nodes_start=o.nodes_end=null),l!=="")){var i=l+"";n?i=`<svg>${i}</svg>`:s&&(i=`<math>${i}</math>`);var c=gs(i);if((n||s)&&(c=Ae(c)),dt(Ae(c),c.lastChild),n||s)for(;Ae(c);)r.before(Ae(c));else r.before(c)}})}const Mn=[...` 	
\r\f \v\uFEFF`];function Gr(e,t,n){var s=e==null?"":""+e;if(n){for(var a in n)if(n[a])s=s?s+" "+a:a;else if(s.length)for(var r=a.length,l=0;(l=s.indexOf(a,l))>=0;){var o=l+r;(l===0||Mn.includes(s[l-1]))&&(o===s.length||Mn.includes(s[o]))?s=(l===0?"":s.substring(0,l))+s.substring(o+1):l=o}}return s===""?null:s}function me(e,t,n,s,a,r){var l=e.__className;if(l!==n||l===void 0){var o=Gr(n,s,r);o==null?e.removeAttribute("class"):e.className=o,e.__className=n}else if(r&&a!==r)for(var i in r){var c=!!r[i];(a==null||c!==!!a[i])&&e.classList.toggle(i,c)}return r}const Br=Symbol("is custom element"),qr=Symbol("is html");function Es(e,t,n,s){var a=Yr(e);a[t]!==(a[t]=n)&&(t==="loading"&&(e[zs]=n),n==null?e.removeAttribute(t):typeof n!="string"&&jr(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Yr(e){return e.__attributes??={[Br]:e.nodeName.includes("-"),[qr]:e.namespaceURI===lr}}var In=new Map;function jr(e){var t=In.get(e.nodeName);if(t)return t;In.set(e.nodeName,t=[]);for(var n,s=e,a=Element.prototype;a!==s;){n=zn(s);for(var r in n)n[r].set&&t.push(r);s=Zt(s)}return t}function Vr(e,t,n=t){var s=nt(),a=new WeakSet;Nr(e,"input",r=>{var l=r?e.defaultValue:e.value;if(l=Wt(e)?Ht(l):l,n(l),j!==null&&a.add(j),s&&l!==(l=t())){var o=e.selectionStart,i=e.selectionEnd;e.value=l??"",i!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(i,e.value.length))}}),ue(t)==null&&e.value&&(n(Wt(e)?Ht(e.value):e.value),j!==null&&a.add(j)),Pt(()=>{var r=t();e===document.activeElement&&a.has(j)||Wt(e)&&r===Ht(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function Wt(e){var t=e.type;return t==="number"||t==="range"}function Ht(e){return e===""?null:+e}function Ss(e,t,n){var s=Pe(e,t);s&&s.set&&(e[t]=n,hn(()=>{e[t]=null}))}function Nn(e,t){return e===t||e?.[De]===t}function kt(e={},t,n,s){return xr(()=>{var a,r;return Pt(()=>{a=r,r=[],ue(()=>{e!==n(...r)&&(t(e,...r),a&&Nn(n(...a),e)&&t(null,...a))})}),()=>{un(()=>{r&&Nn(n(...r),e)&&t(null,...r)})}}),e}function Ie(e=!1){const t=F,n=t.l.u;if(!n)return;let s=()=>at(t.s);if(e){let a=0,r={};const l=fn(()=>{let o=!1;const i=t.s;for(const c in i)i[c]!==r[c]&&(r[c]=i[c],o=!0);return o&&a++,a});s=()=>_(l)}n.b.length&&Er(()=>{Ln(t,s),Gt(n.b)}),Yt(()=>{const a=ue(()=>n.m.map(Ds));return()=>{for(const r of a)typeof r=="function"&&r()}}),n.a.length&&Yt(()=>{Ln(t,s),Gt(n.a)})}function Ln(e,t){if(e.l.s)for(const n of e.l.s)_(n);t()}function xs(e,t,n){if(e==null)return t(void 0),Xe;const s=ue(()=>e.subscribe(t,n));return s.unsubscribe?()=>s.unsubscribe():s}const Ve=[];function xe(e,t=Xe){let n=null;const s=new Set;function a(o){if(Yn(e,o)&&(e=o,n)){const i=!Ve.length;for(const c of s)c[1](),Ve.push(c,e);if(i){for(let c=0;c<Ve.length;c+=2)Ve[c][0](Ve[c+1]);Ve.length=0}}}function r(o){a(o(e))}function l(o,i=Xe){const c=[o,i];return s.add(c),s.size===1&&(n=t(a,r)||Xe),o(e),()=>{s.delete(c),s.size===0&&n&&(n(),n=null)}}return{set:a,update:r,subscribe:l}}function Kr(e){let t;return xs(e,n=>t=n)(),t}let bt=!1,Kt=Symbol();function K(e,t,n){const s=n[t]??={store:null,source:Z(void 0),unsubscribe:Xe};if(s.store!==e&&!(Kt in n))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=Xe;else{var a=!0;s.unsubscribe=xs(e,r=>{a?s.source.v=r:$(s.source,r)}),a=!1}return e&&Kt in n?Kr(e):_(s.source)}function qe(){const e={};function t(){hn(()=>{for(var n in e)e[n].unsubscribe();wt(e,Kt,{enumerable:!1,value:!0})})}return[e,t]}function Xr(e){var t=bt;try{return bt=!1,[e(),bt]}finally{bt=t}}function Jr(e,t,n,s){var a=!tt||(n&tr)!==0,r=(n&sr)!==0,l=s,o=!0,i=()=>(o&&(o=!1,l=s),l),c;{var u=De in e||Hs in e;c=Pe(e,t)?.set??(u&&t in e?w=>e[t]=w:void 0)}var d,v=!1;[d,v]=Xr(()=>e[t]);var f;if(a?f=()=>{var w=e[t];return w===void 0?i():(o=!0,w)}:f=()=>{var w=e[t];return w!==void 0&&(l=void 0),w===void 0?l:w},a&&(n&nr)===0)return f;if(c){var h=e.$$legacy;return function(w,k){return arguments.length>0?((!a||!k||h||v)&&c(k?f():w),w):f()}}var b=!1,p=vn(()=>(b=!1,f()));_(p);var S=M;return function(w,k){if(arguments.length>0){const U=k?_(p):a&&r?Ke(w):w;return $(p,U),b=!0,l!==void 0&&(l=U),w}return Be&&b||(S.f&Ge)!==0?p.v:_(p)}}function Ts(e){F===null&&on(),tt&&F.l!==null?Cs(F).m.push(e):Yt(()=>{const t=ue(e);if(typeof t=="function")return t})}function Qr(e,t,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:s})}function Zr(){const e=F;return e===null&&on(),(t,n,s)=>{const a=e.s.$$events?.[t];if(a){const r=Rt(a)?a.slice():[a],l=Qr(t,n,s);for(const o of r)o.call(e.x,l);return!l.defaultPrevented}return!0}}function ea(e){F===null&&on(),F.l===null&&Ks(),Cs(F).a.push(e)}function Cs(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const ta="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(ta);cr();const Pn=xe([]),it=xe(""),Ut=xe([]),zt=xe(!1),ot=xe(!1),ze=xe(!1),pe=xe(""),Xt=xe(!0),Ot=xe("");function Un(e){Ut.update(t=>[...t,e])}function na(){Ut.set([])}function sa(){pe.set("")}const ra="https://ollama.theronlindsay.dev",aa=["http://localhost:11434"],Jt=!0,la="https://search.theronlindsay.dev",Dn="You are a helpful assistant with real-time web search capabilities. When you need current information, recent news, or want to search for something on the web, I will provide you with live search results from the internet. Always provide accurate and up-to-date information based on the search results provided. When referencing search results, you can mention that the information comes from recent web search.";async function Fn(e){try{const n=`${la}/search?q=${encodeURIComponent(e)}&format=json`;console.log("Performing web search for:",e);const s=await fetch(n,{headers:{Accept:"application/json","User-Agent":"Tron-Chat-App/1.0"}});if(s.ok){const r=(await s.json()).results||[];if(console.log(`✅ Web search successful: Found ${r.length} results for "${e}"`),r.length>0){const l=r.slice(0,5).map((o,i)=>`${i+1}. **${o.title}**
   ${o.content}
   Source: ${o.url}`).join(`

`);return`Search results for "${e}":

${l}`}else return`No search results found for "${e}". Please try a different search term.`}else console.error("Search request failed:",s.status,s.statusText)}catch(n){console.warn("SearXNG search failed, using mock results:",n)}const t=ia(e);return`Search results for "${e}" (fallback):

${t}

*Note: Using fallback search results due to search service unavailability.*`}function ia(e){const t=e.toLowerCase();return t.includes("weather")?`1. **Current Weather Information**
   Real-time weather data and forecasts for locations worldwide. Temperature, humidity, wind conditions, and extended forecasts.
   Source: https://weather.com

2. **Weather Underground**
   Hyperlocal weather forecasts, radar maps, and severe weather alerts with community-driven weather reporting.
   Source: https://wunderground.com

3. **National Weather Service**
   Official weather forecasts, warnings, and meteorological data from NOAA.
   Source: https://weather.gov`:t.includes("news")||t.includes("current")||t.includes("latest")?`1. **Breaking News Updates**
   Latest news headlines, current events, and real-time updates from trusted news sources worldwide.
   Source: https://news.com

2. **Technology News Today**
   Current developments in technology, software updates, and industry innovations.
   Source: https://techcrunch.com

3. **Global Current Events**
   Comprehensive coverage of world news, politics, business, and cultural events happening now.
   Source: https://reuters.com`:`1. **Information about "${e}"**
   Comprehensive overview and detailed information about your search topic with current data and insights.
   Source: https://example.com/info

2. **Latest Updates on "${e}"**
   Recent developments, news, and current information related to your search query.
   Source: https://example.com/updates

3. **Complete Guide to "${e}"**
   In-depth analysis, explanations, and practical information about your topic of interest.
   Source: https://example.com/guide`}function Wn(e){const t=["what is","what are","current","latest","recent","today","now","weather","news","price","stock","update","information about","tell me about","search for","find","look up"],n=e.toLowerCase();return t.some(s=>n.includes(s))}class oa{baseUrl;workingUrl=null;constructor(t=ra){this.baseUrl=t}async findWorkingServer(){if(this.workingUrl)return this.workingUrl;const t=[this.baseUrl,...aa];for(const n of t)try{console.log(`🔍 Testing connection to: ${n}`);const s=await fetch(`${n}/api/tags`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors",signal:AbortSignal.timeout(15e3)});if(s.ok)return this.workingUrl=n,console.log(`✅ Connected to Ollama server at: ${n}`),n;if(s.status===403){console.warn(`🚫 403 Forbidden from ${n} - CORS or access policy issue`);continue}else console.warn(`❌ HTTP ${s.status} from ${n}: ${s.statusText}`)}catch(s){console.warn(`❌ Failed to connect to ${n}:`,s)}throw new Error(`Unable to connect to any Ollama server. Tried: ${t.join(", ")}. Check server configuration and CORS settings.`)}async getModels(){try{const t=await this.findWorkingServer(),n=await fetch(`${t}/api/tags`);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return(await n.json()).models||[]}catch(t){throw console.error("Error fetching models:",t),t instanceof Error?new Error(`Failed to fetch models: ${t.message}`):new Error("Failed to fetch models. Make sure Ollama is running on one of the configured URLs.")}}async chat(t){try{const n=await this.findWorkingServer();let s=[...t.messages];if(t.enableWebSearch&&Jt&&s.length>0){const r=s[s.length-1];if(r.role==="user"&&Wn(r.content)){const o=await Fn(r.content);s.push({role:"system",content:`Web search results:
${o}

Please use these search results to provide an accurate and up-to-date response.`})}s.some(o=>o.role==="system")||s.unshift({role:"system",content:Dn})}const a=await fetch(`${n}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"cors",body:JSON.stringify({model:t.model,messages:s,stream:!1})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(n){throw console.error("Error in chat request:",n),n instanceof Error?new Error(`Failed to send chat message: ${n.message}`):new Error("Failed to send chat message. Check your connection to the Ollama server.")}}async chatStream(t,n){try{const s=await this.findWorkingServer();let a=[...t.messages];if(t.enableWebSearch&&Jt&&a.length>0){const c=a[a.length-1];if(c.role==="user"&&Wn(c.content)){const d=await Fn(c.content);a.push({role:"system",content:`Web search results:
${d}

Please use these search results to provide an accurate and up-to-date response.`})}a.some(d=>d.role==="system")||a.unshift({role:"system",content:Dn})}const r=await fetch(`${s}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:t.model,messages:a,stream:!0})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const l=r.body?.getReader();if(!l)throw new Error("Response body is null");const o=new TextDecoder;let i="";for(;;){const{done:c,value:u}=await l.read();if(c)break;i+=o.decode(u,{stream:!0});const d=i.split(`
`);i=d.pop()||"";for(const v of d)if(v.trim())try{const f=JSON.parse(v);n(f)}catch{console.warn("Failed to parse chunk:",v)}}}catch(s){throw console.error("Error in streaming chat:",s),new Error("Failed to stream chat. Check your connection to the Ollama server.")}}async testConnection(){try{return await this.findWorkingServer(),!0}catch{return!1}}getWorkingUrl(){return this.workingUrl}resetConnection(){this.workingUrl=null}}const ge=new oa;var ca=P('<button><div class="model-name svelte-1k9q3tt"> </div> <div class="model-info svelte-1k9q3tt"> </div></button>'),ua=P('<div class="dropdown-menu svelte-1k9q3tt"></div>'),fa=P('<div class="model-selector svelte-1k9q3tt"><div class="dropdown-container svelte-1k9q3tt"><button title="Select AI Model"><span class="model-icon svelte-1k9q3tt">🤖</span> <span class="model-text svelte-1k9q3tt"><!></span> <span>▼</span></button> <!></div> <button class="refresh-btn svelte-1k9q3tt" title="Refresh models"><span>🔄</span></button></div>');function va(e,t){Ee(t,!1);const[n,s]=qe(),a=()=>K(it,"$selectedModel",n),r=()=>K(zt,"$isLoadingModels",n),l=()=>K(ze,"$isConnected",n),o=()=>K(Pn,"$models",n);let i=Z(!1);Ts(async()=>{await c()});async function c(){zt.set(!0),pe.set(""),ge.resetConnection();try{const m=await ge.testConnection();if(ze.set(m),!m)throw new Error("Cannot connect to any Ollama server. Please check your server configuration.");const g=ge.getWorkingUrl();g&&Ot.set(g);const y=await ge.getModels();Pn.set(y),y.length>0&&!a()&&it.set(y[0].name)}catch(m){console.error("Failed to load models:",m),pe.set(m instanceof Error?m.message:"Failed to load models"),ze.set(!1)}finally{zt.set(!1)}}function u(m){it.set(m),$(i,!1)}function d(){$(i,!_(i))}function v(m){m.target.closest(".model-selector")||$(i,!1)}Ie();var f=fa();Y("click",Zn,v);var h=E(f),b=E(h);let p;var S=A(E(b),2),w=E(S);{var k=m=>{var g=ie("Loading...");x(m,g)},U=m=>{var g=pt(),y=We(g);{var C=H=>{var R=ie();re(D=>Re(R,D),[()=>a().split(":")[0]]),x(H,R)},G=H=>{var R=pt(),D=We(R);{var oe=fe=>{var Le=ie("No models");x(fe,Le)},Ne=fe=>{var Le=ie("Select model");x(fe,Le)};z(D,fe=>{o().length===0?fe(oe):fe(Ne,!1)},!0)}x(H,R)};z(y,H=>{a()?H(C):H(G,!1)},!0)}x(m,g)};z(w,m=>{r()?m(k):m(U,!1)})}var N=A(S,2);let T;var O=A(b,2);{var W=m=>{var g=ua();Vt(g,5,o,ys,(y,C)=>{var G=ca();let H;var R=E(G),D=E(R),oe=A(R,2),Ne=E(oe);re((fe,Le)=>{H=me(G,1,"dropdown-item svelte-1k9q3tt",null,H,fe),Re(D,_(C).name),Re(Ne,`${Le??""}GB`)},[()=>({selected:_(C).name===a()}),()=>(_(C).size/1024/1024/1024).toFixed(1)]),Y("click",G,()=>u(_(C).name)),x(y,G)}),x(m,g)};z(O,m=>{_(i)&&o().length>0&&m(W)})}var B=A(h,2),J=E(B);let L;re((m,g,y)=>{p=me(b,1,"dropdown-toggle svelte-1k9q3tt",null,p,m),b.disabled=r(),T=me(N,1,"dropdown-arrow svelte-1k9q3tt",null,T,g),B.disabled=r(),L=me(J,1,"svelte-1k9q3tt",null,L,y)},[()=>({loading:r(),connected:l(),error:!l()}),()=>({open:_(i)}),()=>({spinning:r()})]),Y("click",b,d),Y("click",B,c),x(e,f),Se(),s()}var da=P('<span class="web-search-indicator svelte-ynms93">🌐</span>'),pa=P('<div><div class="message-bubble svelte-ynms93"><div class="message-content svelte-ynms93"><!></div> <div class="message-meta svelte-ynms93"><span class="timestamp svelte-ynms93"> </span> <!></div></div></div>');function ha(e,t){Ee(t,!1);const n=Z();let s=Jr(t,"message",8);function a(p){return p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function r(p){return p.replace(/```(\w+)?\n([\s\S]*?)\n```/g,'<pre><code class="language-$1">$2</code></pre>').replace(/`([^`]+)`/g,"<code>$1</code>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>")}_n(()=>at(s()),()=>{$(n,s().content.includes("search")||s().content.includes("found")||s().content.includes("according to")||s().content.includes("based on recent information")||s().content.includes("web search")||s().content.includes("I searched"))}),mn(),Ie();var l=pa();let o;var i=E(l),c=E(i),u=E(c);zr(u,()=>(at(s()),ue(()=>r(s().content))));var d=A(c,2),v=E(d),f=E(v),h=A(v,2);{var b=p=>{var S=da();x(p,S)};z(h,p=>{at(s()),_(n),ue(()=>s().role==="assistant"&&_(n))&&p(b)})}re((p,S)=>{o=me(l,1,"message-container svelte-ynms93",null,o,p),Re(f,S)},[()=>({user:s().role==="user",assistant:s().role==="assistant",system:s().role==="system"}),()=>(at(s()),ue(()=>a(s().timestamp)))]),x(e,l),Se()}var _a=P('<button class="clear-button svelte-vbu20p" title="Clear all messages">🗑️ Clear</button>'),ma=P('<button class="scroll-button svelte-vbu20p" title="Scroll to bottom">↓ New messages</button>'),ga=P('<div class="suggestions-loading svelte-vbu20p"><div class="loading-spinner svelte-vbu20p">🔄</div> <p class="svelte-vbu20p">Generating personalized prompts...</p></div>'),ya=P('<button class="suggestion-button svelte-vbu20p"> </button>'),ba=P('<div class="no-suggestions svelte-vbu20p"><p class="svelte-vbu20p">Click the ❓ button to generate AI-powered conversation starters!</p></div>'),wa=P('<div class="empty-state svelte-vbu20p"><div class="empty-icon svelte-vbu20p">💬</div> <h3 class="svelte-vbu20p">No messages yet</h3> <p class="svelte-vbu20p">Start a conversation with your selected AI model!</p> <div class="example-prompts svelte-vbu20p"><div class="prompts-header svelte-vbu20p"><p class="svelte-vbu20p"><strong class="svelte-vbu20p">Try asking:</strong></p> <button class="generate-prompts-btn svelte-vbu20p" title="Generate interesting prompts using AI"><!></button></div> <div class="suggestions-grid svelte-vbu20p"><!></div></div></div>'),Ea=P('<div class="message-container assistant svelte-vbu20p"><div class="message-bubble svelte-vbu20p"><div class="typing-indicator svelte-vbu20p"><div class="dot svelte-vbu20p"></div> <div class="dot svelte-vbu20p"></div> <div class="dot svelte-vbu20p"></div></div></div></div>'),Sa=P("<!> <!>",1),xa=P('<div class="chat-area svelte-vbu20p"><div class="chat-header svelte-vbu20p"><h2 class="svelte-vbu20p">Chat Messages</h2> <div class="chat-controls svelte-vbu20p"><!> <!></div></div> <div class="messages-container svelte-vbu20p"><!></div></div>');function Ta(e,t){Ee(t,!1);const[n,s]=qe(),a=()=>K(Ut,"$messages",n),r=()=>K(ot,"$isSendingMessage",n),l=Zr();let o=Z(),i=Z(!0),c=Z(!1),u=null,d=Z([]);Ts(()=>{a().length===0&&(p(),u=setTimeout(()=>{_(c)&&_(d).length===0&&(console.warn("Prompt generation timed out"),$(c,!1),u=null)},15e3))}),ea(()=>{_(i)&&_(o)&&Tt(o,_(o).scrollTop=_(o).scrollHeight)});function v(){if(_(o)){const{scrollTop:y,scrollHeight:C,clientHeight:G}=_(o);$(i,y+G>=C-50)}}function f(){_(o)&&(Tt(o,_(o).scrollTop=_(o).scrollHeight),$(i,!0))}function h(){confirm("Are you sure you want to clear all messages?")&&na()}function b(y){l("sendMessage",{message:y})}async function p(){if(!r()){u&&(clearTimeout(u),u=null),$(c,!0),u=setTimeout(()=>{_(c)&&(console.warn("Manual prompt generation timed out"),$(c,!1),u=null)},15e3);try{l("generatePrompts",{message:"Generate 4 interesting and diverse questions or prompts that would be great to ask an AI model. Make them engaging, educational, and showcase different capabilities like creative writing, technical explanations, problem-solving, and general knowledge. Return only the questions as a simple list, no numbering, explanations, or extra text. Each question should be on a new line.",forceModel:"gemma3:4b"})}catch(y){console.error("Error generating prompts:",y),u&&(clearTimeout(u),u=null),$(c,!1)}}}function S(y){u&&(clearTimeout(u),u=null),$(d,y),$(c,!1)}Ie();var w=xa(),k=E(w),U=A(E(k),2),N=E(U);{var T=y=>{var C=_a();Y("click",C,h),x(y,C)};z(N,y=>{a().length>0&&y(T)})}var O=A(N,2);{var W=y=>{var C=ma();Y("click",C,f),x(y,C)};z(O,y=>{a().length>0&&!_(i)&&y(W)})}var B=A(k,2),J=E(B);{var L=y=>{var C=wa(),G=A(E(C),6),H=E(G),R=A(E(H),2),D=E(R);{var oe=ee=>{var Te=ie("🔄");x(ee,Te)},Ne=ee=>{var Te=ie("❓");x(ee,Te)};z(D,ee=>{_(c)?ee(oe):ee(Ne,!1)})}var fe=A(H,2),Le=E(fe);{var As=ee=>{var Te=ga();x(ee,Te)},ks=ee=>{var Te=pt(),Os=We(Te);{var Rs=Ye=>{var mt=pt(),Ms=We(mt);Vt(Ms,1,()=>_(d),ys,(Is,wn)=>{var gt=ya(),Ns=E(gt);re(()=>{gt.disabled=r(),Re(Ns,_(wn))}),Y("click",gt,()=>b(_(wn))),x(Is,gt)}),x(Ye,mt)},$s=Ye=>{var mt=ba();x(Ye,mt)};z(Os,Ye=>{_(d).length>0?Ye(Rs):Ye($s,!1)},!0)}x(ee,Te)};z(Le,ee=>{_(c)?ee(As):ee(ks,!1)})}re(()=>R.disabled=_(c)),Y("click",R,p),x(y,C)},m=y=>{var C=Sa(),G=We(C);Vt(G,1,a,D=>D.timestamp,(D,oe)=>{ha(D,{get message(){return _(oe)}})});var H=A(G,2);{var R=D=>{var oe=Ea();x(D,oe)};z(H,D=>{r()&&D(R)})}x(y,C)};z(J,y=>{a().length===0?y(L):y(m,!1)})}kt(B,y=>$(o,y),()=>_(o)),Y("scroll",B,v),x(e,w),Ss(t,"updateSuggestions",S);var g=Se({updateSuggestions:S});return s(),g}var Ca=P('<span class="loading-spinner svelte-1szlnpo">⏳</span>'),Aa=P('<span class="send-icon svelte-1szlnpo">➤</span>'),ka=P('<span class="web-search-indicator svelte-1szlnpo">🌐 Web search enabled</span>'),Oa=P('<span class="model-indicator svelte-1szlnpo"> </span>'),Ra=P('<div class="chat-input-container svelte-1szlnpo"><div class="input-wrapper svelte-1szlnpo"><textarea rows="1"></textarea> <button class="send-button svelte-1szlnpo" title="Send message (Enter)"><!></button></div> <div class="input-help svelte-1szlnpo"><span class="help-text svelte-1szlnpo">Press <kbd class="svelte-1szlnpo">Enter</kbd> to send, <kbd class="svelte-1szlnpo">Shift+Enter</kbd> for new line <!></span> <!></div></div>');function $a(e,t){Ee(t,!1);const[n,s]=qe(),a=()=>K(it,"$selectedModel",n),r=()=>K(ot,"$isSendingMessage",n),l=()=>K(Ut,"$messages",n),o=()=>K(Xt,"$webSearchEnabled",n);let i=Z(""),c=Z();function u(g){!g.trim()||!a()||r()||($(i,g),d())}async function d(){if(!_(i).trim()||!a()||r())return;const g={role:"user",content:_(i).trim(),timestamp:new Date};Un(g);const y=_(i);$(i,""),sa(),ot.set(!0);try{const C=l().map(R=>({role:R.role,content:R.content})),H={role:"assistant",content:(await ge.chat({model:a(),messages:C,enableWebSearch:o()})).message.content,timestamp:new Date};Un(H)}catch(C){console.error("Failed to send message:",C),pe.set(C instanceof Error?C.message:"Failed to send message"),$(i,y)}finally{ot.set(!1)}}function v(g){if(g.key==="Enter"){if(g.shiftKey)return;g.preventDefault(),d()}}function f(){_(c)&&(Tt(c,_(c).style.height="auto"),Tt(c,_(c).style.height=_(c).scrollHeight+"px"))}_n(()=>_(i),()=>{_(i)!==void 0&&setTimeout(f,0)}),mn(),Ie();var h=Ra(),b=E(h),p=E(b);let S;kt(p,g=>$(c,g),()=>_(c));var w=A(p,2),k=E(w);{var U=g=>{var y=Ca();x(g,y)},N=g=>{var y=Aa();x(g,y)};z(k,g=>{r()?g(U):g(N,!1)})}var T=A(b,2),O=E(T),W=A(E(O),5);{var B=g=>{var y=ka();x(g,y)};z(W,g=>{o()&&g(B)})}var J=A(O,2);{var L=g=>{var y=Oa(),C=E(y);re(()=>Re(C,`Using: ${a()??""}`)),x(g,y)};z(J,g=>{a()&&g(L)})}re((g,y)=>{Es(p,"placeholder",a()?`Message ${a()}...`:"Select a model to start chatting..."),p.disabled=!a()||r(),S=me(p,1,"message-input svelte-1szlnpo",null,S,g),w.disabled=y},[()=>({disabled:!a()||r()}),()=>(_(i),a(),r(),ue(()=>!_(i).trim()||!a()||r()))]),Vr(p,()=>_(i),g=>$(i,g)),Y("keydown",p,v),Y("input",p,f),Y("click",w,d),x(e,h),Ss(t,"sendMessageProgrammatically",u);var m=Se({sendMessageProgrammatically:u});return s(),m}var Ma=P('<div class="web-search-toggle svelte-8czc62"><button type="button"><span class="toggle-icon svelte-8czc62">🌐</span> <span class="toggle-text svelte-8czc62">Search</span> <span></span></button></div>');function Ia(e,t){Ee(t,!1);const[n,s]=qe(),a=()=>K(Xt,"$webSearchEnabled",n);function r(){Xt.update(d=>!d)}Ie();var l=Ma(),o=E(l);let i;var c=A(E(o),4);let u;re((d,v)=>{i=me(o,1,"toggle-button svelte-8czc62",null,i,d),o.disabled=!Jt,Es(o,"title",a()?"Web search enabled":"Web search disabled"),u=me(c,1,"toggle-indicator svelte-8czc62",null,u,v)},[()=>({enabled:a()}),()=>({active:a()})]),Y("click",o,r),x(e,l),Se(),s()}var Na=P('<span class="status-connected svelte-84l66l">✅ Connected</span>'),La=P('<span class="status-disconnected svelte-84l66l">❌ Disconnected</span>'),Pa=P('<p class="svelte-84l66l"><strong class="svelte-84l66l">Server:</strong> <code class="svelte-84l66l"> </code></p>'),Ua=P(`<div class="settings-overlay svelte-84l66l" role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="settings-title"><div class="settings-modal svelte-84l66l"><div class="settings-header svelte-84l66l"><h2 id="settings-title" class="svelte-84l66l">⚙️ Settings</h2> <button class="close-button svelte-84l66l">×</button></div> <div class="settings-content svelte-84l66l"><div class="tron-branding svelte-84l66l"><div class="tron-logo svelte-84l66l"><div class="tron-text svelte-84l66l"><span class="tron-letter t svelte-84l66l">T</span> <span class="tron-letter r svelte-84l66l">R</span> <span class="tron-letter o svelte-84l66l">O</span> <span class="tron-letter n svelte-84l66l">N</span></div> <div class="tron-subtitle svelte-84l66l">Theron's Realm of Networks</div> <div class="matrix-rain svelte-84l66l"><div class="matrix-column svelte-84l66l" style="left: 0%; animation-delay: 0s;" data-text="SYSTEM BREACH DETECTED"></div> <div class="matrix-column svelte-84l66l" style="left: 2.5%; animation-delay: 1s;" data-text="ACCESSING MAINFRAME"></div> <div class="matrix-column svelte-84l66l" style="left: 5%; animation-delay: 2s;" data-text="NEURAL NETWORK ACTIVE"></div> <div class="matrix-column svelte-84l66l" style="left: 7.5%; animation-delay: 0.5s;" data-text="QUANTUM ENCRYPTION"></div> <div class="matrix-column svelte-84l66l" style="left: 10%; animation-delay: 1.5s;" data-text="FIREWALL BYPASSED"></div> <div class="matrix-column svelte-84l66l" style="left: 12.5%; animation-delay: 2.5s;" data-text="DATA STREAM ONLINE"></div> <div class="matrix-column svelte-84l66l" style="left: 15%; animation-delay: 0.8s;" data-text="KERNEL PROTOCOL"></div> <div class="matrix-column svelte-84l66l" style="left: 17.5%; animation-delay: 1.8s;" data-text="CIPHER ALGORITHM"></div> <div class="matrix-column svelte-84l66l" style="left: 20%; animation-delay: 2.2s;" data-text="MATRIX PROTOCOL"></div> <div class="matrix-column svelte-84l66l" style="left: 22.5%; animation-delay: 0.3s;" data-text="BACKDOOR ACCESS"></div> <div class="matrix-column svelte-84l66l" style="left: 25%; animation-delay: 1.3s;" data-text="ROOT PRIVILEGE"></div> <div class="matrix-column svelte-84l66l" style="left: 27.5%; animation-delay: 2.8s;" data-text="SHELL INJECTION"></div> <div class="matrix-column svelte-84l66l" style="left: 30%; animation-delay: 0.6s;" data-text="BUFFER OVERFLOW"></div> <div class="matrix-column svelte-84l66l" style="left: 32.5%; animation-delay: 1.6s;" data-text="STACK EXECUTION"></div> <div class="matrix-column svelte-84l66l" style="left: 35%; animation-delay: 2.1s;" data-text="MEMORY ALLOCATION"></div> <div class="matrix-column svelte-84l66l" style="left: 37.5%; animation-delay: 0.9s;" data-text="PAYLOAD DELIVERY"></div> <div class="matrix-column svelte-84l66l" style="left: 40%; animation-delay: 1.9s;" data-text="EXPLOIT FRAMEWORK"></div> <div class="matrix-column svelte-84l66l" style="left: 42.5%; animation-delay: 2.7s;" data-text="REVERSE SHELL"></div> <div class="matrix-column svelte-84l66l" style="left: 45%; animation-delay: 0.4s;" data-text="PRIVILEGE ESCALATION"></div> <div class="matrix-column svelte-84l66l" style="left: 47.5%; animation-delay: 1.4s;" data-text="STEGANOGRAPHY"></div> <div class="matrix-column svelte-84l66l" style="left: 50%; animation-delay: 2.4s;" data-text="CRYPTOGRAPHIC HASH"></div> <div class="matrix-column svelte-84l66l" style="left: 52.5%; animation-delay: 0.7s;" data-text="VULNERABILITY SCAN"></div> <div class="matrix-column svelte-84l66l" style="left: 55%; animation-delay: 1.7s;" data-text="PENETRATION TEST"></div> <div class="matrix-column svelte-84l66l" style="left: 57.5%; animation-delay: 2.3s;" data-text="SOCIAL ENGINEERING"></div> <div class="matrix-column svelte-84l66l" style="left: 60%; animation-delay: 1.1s;" data-text="ZERO DAY EXPLOIT"></div> <div class="matrix-column svelte-84l66l" style="left: 62.5%; animation-delay: 0.2s;" data-text="NETWORK INTRUSION"></div> <div class="matrix-column svelte-84l66l" style="left: 65%; animation-delay: 1.2s;" data-text="BINARY EXECUTION"></div> <div class="matrix-column svelte-84l66l" style="left: 67.5%; animation-delay: 2.6s;" data-text="CODE INJECTION"></div> <div class="matrix-column svelte-84l66l" style="left: 70%; animation-delay: 0.1s;" data-text="SQL INJECTION"></div> <div class="matrix-column svelte-84l66l" style="left: 72.5%; animation-delay: 1.0s;" data-text="CROSS SITE SCRIPT"></div> <div class="matrix-column svelte-84l66l" style="left: 75%; animation-delay: 2.0s;" data-text="DENIAL OF SERVICE"></div> <div class="matrix-column svelte-84l66l" style="left: 77.5%; animation-delay: 0.7s;" data-text="BRUTE FORCE ATTACK"></div> <div class="matrix-column svelte-84l66l" style="left: 80%; animation-delay: 1.8s;" data-text="TROJAN HORSE"></div> <div class="matrix-column svelte-84l66l" style="left: 82.5%; animation-delay: 2.9s;" data-text="MALWARE DETECTED"></div> <div class="matrix-column svelte-84l66l" style="left: 85%; animation-delay: 0.4s;" data-text="PHISHING ATTEMPT"></div> <div class="matrix-column svelte-84l66l" style="left: 87.5%; animation-delay: 1.5s;" data-text="RANSOMWARE ALERT"></div> <div class="matrix-column svelte-84l66l" style="left: 90%; animation-delay: 2.7s;" data-text="BOTNET ACTIVITY"></div> <div class="matrix-column svelte-84l66l" style="left: 92.5%; animation-delay: 0.9s;" data-text="KEYLOGGER ACTIVE"></div> <div class="matrix-column svelte-84l66l" style="left: 95%; animation-delay: 1.7s;" data-text="SPYWARE RUNNING"></div> <div class="matrix-column svelte-84l66l" style="left: 97.5%; animation-delay: 2.5s;" data-text="ROOTKIT INSTALLED"></div></div></div></div> <div class="setting-section svelte-84l66l"><h3 class="svelte-84l66l">🌐 Server Connection</h3> <div class="connection-info svelte-84l66l"><p class="svelte-84l66l"><strong class="svelte-84l66l">Status:</strong> <!></p> <!> <div class="server-list svelte-84l66l"><p class="svelte-84l66l"><strong class="svelte-84l66l">Configuration:</strong></p> <div class="server-item svelte-84l66l"><code class="svelte-84l66l">Primary: ollama.theronlindsay.dev</code></div> <div class="server-item svelte-84l66l"><code class="svelte-84l66l">Fallback: localhost:11434</code></div></div> <button class="test-connection-button svelte-84l66l"><!></button></div></div> <div class="setting-section svelte-84l66l"><h3 class="svelte-84l66l">💡 Usage Tips</h3> <ul class="tips-list svelte-84l66l"><li class="svelte-84l66l">The app automatically tries backup servers if the primary fails</li> <li class="svelte-84l66l">Enable web search for current information and recent updates</li> <li class="svelte-84l66l">Press Enter to send messages, Shift+Enter for new lines</li> <li class="svelte-84l66l">Select different models from the dropdown for varied responses</li></ul></div></div></div></div>`),Da=P('<button class="settings-button svelte-84l66l" aria-label="Settings"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-84l66l"><circle cx="12" cy="12" r="3" class="svelte-84l66l"></circle><path d="M12 1v6m0 10v6m11-7h-6m-10 0H1m15.5-6.5L19 6.5m-14 11l2.5-2.5m11-11L16 6.5M5 17.5l2.5-2.5" class="svelte-84l66l"></path></svg></button> <!>',1);function Fa(e,t){Ee(t,!1);const[n,s]=qe(),a=()=>K(ze,"$isConnected",n),r=()=>K(Ot,"$currentServerUrl",n);let l=Z(!1),o=Z(!1);function i(){$(l,!_(l))}async function c(){$(o,!0),pe.set(""),ge.resetConnection();try{const p=await ge.testConnection();if(ze.set(p),p){const S=ge.getWorkingUrl();S&&Ot.set(S),pe.set("✅ Connection successful!")}else pe.set("❌ Failed to connect to any Ollama server")}catch(p){console.error("Connection test failed:",p),pe.set(p instanceof Error?p.message:"Connection test failed"),ze.set(!1)}finally{$(o,!1)}}function u(p){p.target===p.currentTarget&&$(l,!1)}function d(p){p.key==="Escape"&&$(l,!1)}Ie();var v=Da(),f=We(v),h=A(f,2);{var b=p=>{var S=Ua(),w=E(S),k=E(w),U=A(E(k),2),N=A(k,2),T=A(E(N),2),O=A(E(T),2),W=E(O),B=A(E(W),2);{var J=R=>{var D=Na();x(R,D)},L=R=>{var D=La();x(R,D)};z(B,R=>{a()?R(J):R(L,!1)})}var m=A(W,2);{var g=R=>{var D=Pa(),oe=A(E(D),2),Ne=E(oe);re(()=>Re(Ne,r())),x(R,D)};z(m,R=>{r()&&R(g)})}var y=A(m,4),C=E(y);{var G=R=>{var D=ie("🔄 Testing...");x(R,D)},H=R=>{var D=ie("🔍 Test Connection");x(R,D)};z(C,R=>{_(o)?R(G):R(H,!1)})}re(()=>y.disabled=_(o)),Y("click",U,i),Y("click",y,c),Y("click",S,u),Y("keydown",S,d),x(p,S)};z(h,p=>{_(l)&&p(b)})}Y("click",f,i),x(e,v),Se(),s()}var Wa=P('<div class="solution-box svelte-yrygtg"><h4 class="svelte-yrygtg">🔧 How to fix this:</h4> <div class="solutions svelte-yrygtg"><div class="solution svelte-yrygtg"><strong class="svelte-yrygtg">1. Configure Ollama for web access:</strong> <code class="svelte-yrygtg">export OLLAMA_ORIGINS="*"</code> <code class="svelte-yrygtg">ollama serve</code></div> <div class="solution svelte-yrygtg"><strong class="svelte-yrygtg">2. Or start Ollama with CORS enabled:</strong> <code class="svelte-yrygtg">OLLAMA_ORIGINS="http://localhost:5173,http://localhost:3000" ollama serve</code></div> <div class="solution svelte-yrygtg"><strong class="svelte-yrygtg">3. For production, use specific origins:</strong> <code class="svelte-yrygtg">OLLAMA_ORIGINS="https://your-domain.com" ollama serve</code></div> <div class="solution svelte-yrygtg"><strong class="svelte-yrygtg">4. Check reverse proxy configuration (nginx/apache):</strong> <p class="svelte-yrygtg">Ensure your reverse proxy includes CORS headers</p></div></div> <p class="fallback-note svelte-yrygtg">💡 <strong>Tip:</strong> The app will automatically use your local Ollama server (localhost:11434) as a fallback if available.</p></div>'),Ha=P('<div><div class="error-header svelte-yrygtg"><span class="error-icon svelte-yrygtg"><!></span> <span class="error-title svelte-yrygtg"><!></span> <button class="dismiss-btn svelte-yrygtg" title="Dismiss error">×</button></div> <div class="error-content svelte-yrygtg"><p class="error-text svelte-yrygtg"> </p> <!></div></div>');function za(e,t){Ee(t,!1);const[n,s]=qe(),a=()=>K(pe,"$errorMessage",n),r=Z();function l(){pe.set("")}_n(()=>a(),()=>{$(r,a().includes("403")||a().includes("CORS")||a().includes("Forbidden"))}),mn(),Ie();var o=pt(),i=We(o);{var c=u=>{var d=Ha();let v;var f=E(d),h=E(f),b=E(h);{var p=m=>{var g=ie("🚫");x(m,g)},S=m=>{var g=ie("⚠️");x(m,g)};z(b,m=>{_(r)?m(p):m(S,!1)})}var w=A(h,2),k=E(w);{var U=m=>{var g=ie("CORS / Access Denied Error");x(m,g)},N=m=>{var g=ie("Connection Error");x(m,g)};z(k,m=>{_(r)?m(U):m(N,!1)})}var T=A(w,2),O=A(f,2),W=E(O),B=E(W),J=A(W,2);{var L=m=>{var g=Wa();x(m,g)};z(J,m=>{_(r)&&m(L)})}re(m=>{v=me(d,1,"error-banner svelte-yrygtg",null,v,m),Re(B,a())},[()=>({"cors-error":_(r)})]),Y("click",T,l),x(u,d)};z(i,u=>{a()&&u(c)})}x(e,o),Se(),s()}var Ga=P('<span class="status-indicator connected svelte-1309zcd"></span> <span class="status-text svelte-1309zcd">Connected</span>',1),Ba=P('<span class="status-indicator connecting svelte-1309zcd"></span> <span class="status-text svelte-1309zcd">Connecting...</span>',1),qa=P('<main class="svelte-1309zcd"><div class="app-header svelte-1309zcd"><div class="header-left svelte-1309zcd"><h1 class="svelte-1309zcd">🤖 TRON</h1> <div class="connection-status svelte-1309zcd"><!></div></div> <div class="header-controls svelte-1309zcd"><!> <!> <!></div></div> <div class="chat-container svelte-1309zcd"><!> <!> <!></div></main>');function Ya(e,t){Ee(t,!1);const[n,s]=qe(),a=()=>K(ot,"$isSendingMessage",n),r=()=>K(it,"$selectedModel",n),l=()=>K(ze,"$isConnected",n),o=()=>K(Ot,"$currentServerUrl",n);let i=Z(),c=Z();function u(L){const{message:m}=L.detail;_(i)?.sendMessageProgrammatically(m)}async function d(L){const{message:m,forceModel:g}=L.detail;if(a())return;const y=g||r();if(y)try{const G=(await ge.chat({model:y,messages:[{role:"user",content:m}],enableWebSearch:!1})).message.content.split(`
`).filter(H=>H.trim()).slice(0,4).map(H=>H.replace(/^[\d\-\*\•]\s*/,"").trim());G.length>0&&_(c)?.updateSuggestions(G)}catch(C){console.error("Error generating prompts:",C)}}Ie();var v=qa(),f=E(v),h=E(f),b=A(E(h),2),p=E(b);{var S=L=>{var m=Ga();x(L,m)},w=L=>{var m=Ba();x(L,m)};z(p,L=>{l()&&o()?L(S):L(w,!1)})}var k=A(h,2),U=E(k);va(U,{});var N=A(U,2);Ia(N,{});var T=A(N,2);Fa(T,{});var O=A(f,2),W=E(O);za(W,{});var B=A(W,2);kt(Ta(B,{$$events:{sendMessage:u,generatePrompts:d},$$legacy:!0}),L=>$(c,L),()=>_(c));var J=A(B,2);kt($a(J,{$$legacy:!0}),L=>$(i,L),()=>_(i)),x(e,v),Se(),s()}Ur(Ya,{target:document.getElementById("app")});
